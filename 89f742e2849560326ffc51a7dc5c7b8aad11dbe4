{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3fe87ff1_f5bae12c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2023-04-21T19:23:54Z",
      "side": 1,
      "message": "looks OK assuming the d-bus interface is approved",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6f902a54_1a9130fc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-24T06:43:57Z",
      "side": 1,
      "message": "It has been merged: https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/61486",
      "parentUuid": "3fe87ff1_f5bae12c",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14e249fa_4a3ef35c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-24T07:02:36Z",
      "side": 1,
      "message": "DBus is starting to become more tightly integrated into the obmc-console implementation. I think it should probably still be easy to disable it. I feel that we should probably start isolate the DBus related code into its own file which can be compiled in or out as required by the build configuration.",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ec1412a6_c38661f9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-24T07:05:26Z",
      "side": 1,
      "message": "Marking as -1 to counteract Jonathan\u0027s +1 for now ðŸ˜Š",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3660204e_9d037619",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-04-26T17:41:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "14e249fa_4a3ef35c",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "402853ee_975e0640",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-26T22:37:58Z",
      "side": 1,
      "message": "I probably should have been more explicit here. Moving code to a separate file and changing the code\u0027s behaviour in the one patch makes the work very difficult to review.\n\nI would like to see this as two patches:\n\n1. Move the code out to a separate file (`console-dbus.c` as you\u0027ve used here is fine).\n2. Rework the code to change the DBus behaviour at runtime\n\nThis allows others to better inspect how the behaviour has changed in the diff of 2.\n\nThe trick to getting things merged is to make it hard for a maintainer to say no, rather than merely making it possible for a maintainer to say yes. Patches that are more difficult to review than is necessary are an easy \"no\" ðŸ˜Š",
      "parentUuid": "3660204e_9d037619",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc013585_4be44329",
        "filename": "console-server.c",
        "patchSetId": 8
      },
      "lineNbr": 527,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-24T07:02:36Z",
      "side": 1,
      "message": "Please let\u0027s not register multiple well-known bus names for the one connection.\n\nWe already have a bus name registered at line 490.\n\nHaving said that, there can be multiple instances of `obmc-console-server`, and the currently registered bus name does not incorporate anything to distinguish it from any other instance. So the current behaviour is broken. I recognise this is not your fault. However, we do need to fix it, and I think the time has come.\n\nFurther, the bus name request should happen only after we\u0027ve initialised all objects to be presented on the connection - this is a requirement if we are to interact sensibly with the rest of the DBus components in the system.\n\nThus, IMO the request on 490 should be deleted in favour of this new request on 521. However, this is likely a breaking change on systems with only a single console. We need to put some effort in to determine whether any other applications in the OpenBMC ecosystem is accessing the obmc-console-server instance through this existing bus name (the `DBUS_NAME` constant). If there are, then these applications will need to be fixed. The fix is probably best done by having any dependent applications look up the connection through the mapper.\n\nA stretch goal is to get the interface that allows configuration of the TTY (such as baud rate) defined in phosphor-dbus-interfaces.",
      "range": {
        "startLine": 521,
        "startChar": 1,
        "endLine": 527,
        "endChar": 2
      },
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f00fd426_89862f9b",
        "filename": "console-server.c",
        "patchSetId": 8
      },
      "lineNbr": 527,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-04-26T17:41:47Z",
      "side": 1,
      "message": "Removed original BUS name and moved buadrate and setBaudRate under new BUS name.\nThe old property is not used by anyone.\n\nI will update phosphor-dbus-interface once you are ok with this.",
      "parentUuid": "dc013585_4be44329",
      "range": {
        "startLine": 521,
        "startChar": 1,
        "endLine": 527,
        "endChar": 2
      },
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89a200d3_ab311f64",
        "filename": "console-server.c",
        "patchSetId": 8
      },
      "lineNbr": 577,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-24T07:02:36Z",
      "side": 1,
      "message": "This is a bit of a maze, and I think it would be improved by refactoring `console_socket_path()` take a pointer to a `socket_path_t` into which it renders the socket name.",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32ec2e71_1211e04d",
        "filename": "console-server.c",
        "patchSetId": 8
      },
      "lineNbr": 577,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-04-26T17:41:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89a200d3_ab311f64",
      "revId": "89f742e2849560326ffc51a7dc5c7b8aad11dbe4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}